import{b as C,r as i,d as G,e as Te,j as e,R as Oe,f as Ee,g as _e,h as B,P as Z,i as k,A as W,k as J,l as Ue,m as Ve,n as Le,o as qe,p as ze,F as He,D as $e,C as Ke,q as Ge,s as g,T as Be,t as Ze,v as We,w as Je,x as Q,y as Y,B as w,z as X,E as F,H as ee,I as se,J as Qe,K as y,L as ae,M as te,O as d,Q as re,S as oe,U as ne,V as le,W as ie,X as ce,Y as f,Z as j,_ as v,$ as S,a0 as N,a1 as L,a2 as de,a3 as _,a4 as Ye,a5 as Xe,a6 as me,a7 as es,a8 as ss,a9 as as,aa as ts,c as rs}from"./index-Dqu9bGDR.js";import{A as q,a as z,C as os,E as ns,u as ls,D as is,I as cs,S as ue,b as pe,c as he,d as xe,e as E,f as ds,T as ms,g as us,h as ps,i as hs,j as xs,k as gs,l as fs,m as js,n as O,o as vs,p as H,q as Ns,r as $,s as ws,t as ys,v as Cs,w as Ps,x as bs,y as Ss}from"./table-DVK-L7l9.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rs=C("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ms=C("outline","loader","IconLoader",[["path",{d:"M12 6l0 -3",key:"svg-0"}],["path",{d:"M16.25 7.75l2.15 -2.15",key:"svg-1"}],["path",{d:"M18 12l3 0",key:"svg-2"}],["path",{d:"M16.25 16.25l2.15 2.15",key:"svg-3"}],["path",{d:"M12 18l0 3",key:"svg-4"}],["path",{d:"M7.75 16.25l-2.15 2.15",key:"svg-5"}],["path",{d:"M6 12l-3 0",key:"svg-6"}],["path",{d:"M7.75 7.75l-2.15 -2.15",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Is=C("outline","mail-plus","IconMailPlus",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v5.5",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ks=C("outline","send","IconSend",[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ds=C("outline","shield","IconShield",[["path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var As=C("outline","user-bolt","IconUserBolt",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4c.267 0 .529 .026 .781 .076",key:"svg-1"}],["path",{d:"M19 16l-2 3h4l-2 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fs=C("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ts=C("outline","user-shield","IconUserShield",[["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h2",key:"svg-0"}],["path",{d:"M22 16c0 4 -2.5 6 -3.5 6s-3.5 -2 -3.5 -6c1 0 2.5 -.5 3.5 -1.5c1 1 2.5 1.5 3.5 1.5z",key:"svg-1"}],["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-2"}]]),T="Popover",[ge,xa]=Ee(T,[G]),D=G(),[Os,P]=ge(T),fe=s=>{const{__scopePopover:a,children:t,open:o,defaultOpen:r,onOpenChange:l,modal:c=!1}=s,n=D(a),u=i.useRef(null),[p,x]=i.useState(!1),[b,h]=Te({prop:o,defaultProp:r??!1,onChange:l,caller:T});return e.jsx(Oe,{...n,children:e.jsx(Os,{scope:a,contentId:_e(),triggerRef:u,open:b,onOpenChange:h,onOpenToggle:i.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:p,onCustomAnchorAdd:i.useCallback(()=>x(!0),[]),onCustomAnchorRemove:i.useCallback(()=>x(!1),[]),modal:c,children:t})})};fe.displayName=T;var je="PopoverAnchor",Es=i.forwardRef((s,a)=>{const{__scopePopover:t,...o}=s,r=P(je,t),l=D(t),{onCustomAnchorAdd:c,onCustomAnchorRemove:n}=r;return i.useEffect(()=>(c(),()=>n()),[c,n]),e.jsx(W,{...l,...o,ref:a})});Es.displayName=je;var ve="PopoverTrigger",Ne=i.forwardRef((s,a)=>{const{__scopePopover:t,...o}=s,r=P(ve,t),l=D(t),c=B(a,r.triggerRef),n=e.jsx(Z.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":be(r.open),...o,ref:c,onClick:k(s.onClick,r.onOpenToggle)});return r.hasCustomAnchor?n:e.jsx(W,{asChild:!0,...l,children:n})});Ne.displayName=ve;var U="PopoverPortal",[_s,Us]=ge(U,{forceMount:void 0}),we=s=>{const{__scopePopover:a,forceMount:t,children:o,container:r}=s,l=P(U,a);return e.jsx(_s,{scope:a,forceMount:t,children:e.jsx(J,{present:t||l.open,children:e.jsx(Ue,{asChild:!0,container:r,children:o})})})};we.displayName=U;var R="PopoverContent",ye=i.forwardRef((s,a)=>{const t=Us(R,s.__scopePopover),{forceMount:o=t.forceMount,...r}=s,l=P(R,s.__scopePopover);return e.jsx(J,{present:o||l.open,children:l.modal?e.jsx(Ls,{...r,ref:a}):e.jsx(qs,{...r,ref:a})})});ye.displayName=R;var Vs=qe("PopoverContent.RemoveScroll"),Ls=i.forwardRef((s,a)=>{const t=P(R,s.__scopePopover),o=i.useRef(null),r=B(a,o),l=i.useRef(!1);return i.useEffect(()=>{const c=o.current;if(c)return Ve(c)},[]),e.jsx(Le,{as:Vs,allowPinchZoom:!0,children:e.jsx(Ce,{...s,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:k(s.onCloseAutoFocus,c=>{var n;c.preventDefault(),l.current||(n=t.triggerRef.current)==null||n.focus()}),onPointerDownOutside:k(s.onPointerDownOutside,c=>{const n=c.detail.originalEvent,u=n.button===0&&n.ctrlKey===!0,p=n.button===2||u;l.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:k(s.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),qs=i.forwardRef((s,a)=>{const t=P(R,s.__scopePopover),o=i.useRef(!1),r=i.useRef(!1);return e.jsx(Ce,{...s,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var c,n;(c=s.onCloseAutoFocus)==null||c.call(s,l),l.defaultPrevented||(o.current||(n=t.triggerRef.current)==null||n.focus(),l.preventDefault()),o.current=!1,r.current=!1},onInteractOutside:l=>{var u,p;(u=s.onInteractOutside)==null||u.call(s,l),l.defaultPrevented||(o.current=!0,l.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const c=l.target;((p=t.triggerRef.current)==null?void 0:p.contains(c))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&r.current&&l.preventDefault()}})}),Ce=i.forwardRef((s,a)=>{const{__scopePopover:t,trapFocus:o,onOpenAutoFocus:r,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEscapeKeyDown:n,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:x,...b}=s,h=P(R,t),m=D(t);return ze(),e.jsx(He,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:r,onUnmountAutoFocus:l,children:e.jsx($e,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:x,onEscapeKeyDown:n,onPointerDownOutside:u,onFocusOutside:p,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(Ke,{"data-state":be(h.open),role:"dialog",id:h.contentId,...m,...b,ref:a,style:{...b.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Pe="PopoverClose",zs=i.forwardRef((s,a)=>{const{__scopePopover:t,...o}=s,r=P(Pe,t);return e.jsx(Z.button,{type:"button",...o,ref:a,onClick:k(s.onClick,()=>r.onOpenChange(!1))})});zs.displayName=Pe;var Hs="PopoverArrow",$s=i.forwardRef((s,a)=>{const{__scopePopover:t,...o}=s,r=D(t);return e.jsx(Ge,{...r,...o,ref:a})});$s.displayName=Hs;function be(s){return s?"open":"closed"}var Ks=fe,Gs=Ne,Bs=we,Se=ye;const Zs=Ks,Ws=Gs,Re=i.forwardRef(({className:s,align:a="center",sideOffset:t=4,...o},r)=>e.jsx(Bs,{children:e.jsx(Se,{ref:r,align:a,sideOffset:t,className:g("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})}));Re.displayName=Se.displayName;function A({children:s,className:a="",contentClassName:t=""}){const o=i.useRef(null),[r,l]=i.useState(!1);return i.useEffect(()=>{if(Js(o.current)){l(!0);return}l(!1)},[]),r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx(Be,{delayDuration:0,children:e.jsxs(Ze,{children:[e.jsx(We,{asChild:!0,children:e.jsx("div",{ref:o,className:g("truncate",a),children:s})}),e.jsx(Je,{children:e.jsx("p",{className:t,children:s})})]})})}),e.jsx("div",{className:"sm:hidden",children:e.jsxs(Zs,{children:[e.jsx(Ws,{asChild:!0,children:e.jsx("div",{ref:o,className:g("truncate",a),children:s})}),e.jsx(Re,{className:g("w-fit",t),children:e.jsx("p",{children:s})})]})})]}):e.jsx("div",{ref:o,className:g("truncate",a),children:s})}const Js=s=>s?s.offsetHeight<s.scrollHeight||s.offsetWidth<s.scrollWidth:!1;function I({column:s,title:a,className:t}){return s.getCanSort()?e.jsx("div",{className:g("flex items-center space-x-2",t),children:e.jsxs(Q,{children:[e.jsx(Y,{asChild:!0,children:e.jsxs(w,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:a}),s.getIsSorted()==="desc"?e.jsx(q,{className:"ml-2 h-4 w-4"}):s.getIsSorted()==="asc"?e.jsx(z,{className:"ml-2 h-4 w-4"}):e.jsx(os,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(X,{align:"start",children:[e.jsxs(F,{onClick:()=>s.toggleSorting(!1),children:[e.jsx(z,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(F,{onClick:()=>s.toggleSorting(!0),children:[e.jsx(q,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),s.getCanHide()&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs(F,{onClick:()=>s.toggleVisibility(!1),children:[e.jsx(ns,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})]})}):e.jsx("div",{className:g(t),children:a})}const Me=se.createContext(null);function Qs({children:s}){const[a,t]=ls(null),[o,r]=i.useState(null);return e.jsx(Me,{value:{open:a,setOpen:t,currentRow:o,setCurrentRow:r},children:s})}const V=()=>{const s=se.useContext(Me);if(!s)throw new Error("useUsers has to be used within <UsersContext>");return s};function Ys({row:s}){const{setOpen:a,setCurrentRow:t}=V();return e.jsx(e.Fragment,{children:e.jsxs(Q,{modal:!1,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(w,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(is,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(X,{align:"end",className:"w-[160px]",children:[e.jsx(ee,{}),e.jsxs(F,{onClick:()=>{t(s.original),a("delete")},className:"!text-red-500",children:["Delete",e.jsx(Qe,{children:e.jsx(cs,{size:16})})]})]})]})})}const Xs=[{accessorKey:"member_id",id:"member_id",header:({column:s})=>e.jsx(I,{column:s,title:"Member ID"}),cell:({row:s})=>e.jsx(A,{className:"max-w-50",children:s.getValue("member_id")}),meta:{className:"w-50"}},{accessorKey:"name",id:"name",header:({column:s})=>e.jsx(I,{column:s,title:"Name"}),cell:({row:s})=>e.jsx(A,{className:"max-w-100",children:s.getValue("name")}),meta:{className:"w-100"}},{accessorKey:"username",header:({column:s})=>e.jsx(I,{column:s,title:"Username"}),cell:({row:s})=>e.jsx(A,{className:"max-w-36",children:s.getValue("username")}),enableHiding:!1},{accessorKey:"password",header:({column:s})=>e.jsx(I,{column:s,title:"Password"}),cell:({row:s})=>e.jsx(A,{className:"max-w-36",children:s.getValue("password")}),enableHiding:!1},{accessorKey:"phone",header:({column:s})=>e.jsx(I,{column:s,title:"Phone Number"}),cell:({row:s})=>e.jsx("div",{children:s.getValue("phone")}),enableSorting:!1},{id:"actions",cell:Ys}];function Ie({defaultValue:s,onValueChange:a,isPending:t,items:o,placeholder:r,disabled:l,className:c="",isControlled:n=!1}){const u=n?{value:s,onValueChange:a}:{defaultValue:s,onValueChange:a};return e.jsxs(ue,{...u,children:[e.jsx(y,{children:e.jsx(pe,{disabled:l,className:g(c),children:e.jsx(he,{placeholder:r??"Select"})})}),e.jsx(xe,{children:t?e.jsx(E,{disabled:!0,value:"loading",className:"h-14",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5 animate-spin"}),"  ","Loading..."]})}):o==null?void 0:o.map(({label:p,value:x})=>e.jsx(E,{value:x,children:p},x))})]})}const ke=[{label:"Voter",value:"voter",icon:Ds},{label:"Admin",value:"admin",icon:Ts},{label:"Teller",value:"teller",icon:As}],ea=d.object({firstName:d.string().min(1,{message:"First Name is required."}),lastName:d.string().min(1,{message:"Last Name is required."}),username:d.string().min(1,{message:"Username is required."}),phoneNumber:d.string().min(1,{message:"Phone number is required."}),email:d.string().min(1,{message:"Email is required."}).email({message:"Email is invalid."}),password:d.string().transform(s=>s.trim()),role:d.string().min(1,{message:"Role is required."}),confirmPassword:d.string().transform(s=>s.trim()),isEdit:d.boolean()}).superRefine(({isEdit:s,password:a,confirmPassword:t},o)=>{(!s||s&&a!=="")&&(a===""&&o.addIssue({code:d.ZodIssueCode.custom,message:"Password is required.",path:["password"]}),a.length<4&&o.addIssue({code:d.ZodIssueCode.custom,message:"Password must be at least 4 characters long.",path:["password"]}),a.match(/[a-z]/)||o.addIssue({code:d.ZodIssueCode.custom,message:"Password must contain at least one lowercase letter.",path:["password"]}),a!==t&&o.addIssue({code:d.ZodIssueCode.custom,message:"Passwords don't match.",path:["confirmPassword"]}))});function K({currentRow:s,open:a,onOpenChange:t}){const o=!!s,r=ae({resolver:te(ea),defaultValues:o?{...s,password:"",confirmPassword:"",isEdit:o}:{firstName:"",lastName:"",username:"",email:"",role:"",phoneNumber:"",password:"",confirmPassword:"",isEdit:o}}),l=n=>{r.reset(),_({title:"You submitted the following values:",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(n,null,2)})})}),t(!1)},c=!!r.formState.dirtyFields.password;return e.jsx(re,{open:a,onOpenChange:n=>{r.reset(),t(n)},children:e.jsxs(oe,{className:"sm:max-w-lg",children:[e.jsxs(ne,{className:"text-left",children:[e.jsx(le,{children:o?"Edit Member":"Add New Member"}),e.jsxs(ie,{children:[o?"Update the member here. ":"Create new member here. ","Click save when you're done."]})]}),e.jsx("div",{className:"-mr-4 h-[26.25rem] w-full overflow-y-auto py-1 pr-4",children:e.jsx(ce,{...r,children:e.jsxs("form",{id:"user-form",onSubmit:r.handleSubmit(l),className:"space-y-4 p-0.5",children:[e.jsx(f,{control:r.control,name:"firstName",render:({field:n})=>e.jsxs(j,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(v,{className:"col-span-2 text-right",children:"Name"}),e.jsx(y,{children:e.jsx(S,{placeholder:"John",className:"col-span-4",autoComplete:"off",...n})}),e.jsx(N,{className:"col-span-4 col-start-3"})]})}),e.jsx(f,{control:r.control,name:"lastName",render:({field:n})=>e.jsxs(j,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(v,{className:"col-span-2 text-right",children:"Last Name"}),e.jsx(y,{children:e.jsx(S,{placeholder:"Doe",className:"col-span-4",autoComplete:"off",...n})}),e.jsx(N,{className:"col-span-4 col-start-3"})]})}),e.jsx(f,{control:r.control,name:"username",render:({field:n})=>e.jsxs(j,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(v,{className:"col-span-2 text-right",children:"Username"}),e.jsx(y,{children:e.jsx(S,{placeholder:"john_doe",className:"col-span-4",...n})}),e.jsx(N,{className:"col-span-4 col-start-3"})]})}),e.jsx(f,{control:r.control,name:"phoneNumber",render:({field:n})=>e.jsxs(j,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(v,{className:"col-span-2 text-right",children:"Phone Number"}),e.jsx(y,{children:e.jsx(S,{placeholder:"+123456789",className:"col-span-4",...n})}),e.jsx(N,{className:"col-span-4 col-start-3"})]})}),e.jsx(f,{control:r.control,name:"role",render:({field:n})=>e.jsxs(j,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(v,{className:"col-span-2 text-right",children:"Role"}),e.jsx(Ie,{defaultValue:n.value,onValueChange:n.onChange,placeholder:"Select a role",className:"col-span-4",items:ke.map(({label:u,value:p})=>({label:u,value:p}))}),e.jsx(N,{className:"col-span-4 col-start-3"})]})}),e.jsx(f,{control:r.control,name:"password",render:({field:n})=>e.jsxs(j,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(v,{className:"col-span-2 text-right",children:"Password"}),e.jsx(y,{children:e.jsx(L,{placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...n})}),e.jsx(N,{className:"col-span-4 col-start-3"})]})}),e.jsx(f,{control:r.control,name:"confirmPassword",render:({field:n})=>e.jsxs(j,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(v,{className:"col-span-2 text-right",children:"Confirm Password"}),e.jsx(y,{children:e.jsx(L,{disabled:!c,placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...n})}),e.jsx(N,{className:"col-span-4 col-start-3"})]})})]})})}),e.jsx(de,{children:e.jsx(w,{type:"submit",form:"user-form",children:"Save changes"})})]})})}const sa=Ye("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),De=i.forwardRef(({className:s,variant:a,...t},o)=>e.jsx("div",{ref:o,role:"alert",className:g(sa({variant:a}),s),...t}));De.displayName="Alert";const Ae=i.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:g("mb-1 font-medium leading-none tracking-tight",s),...a}));Ae.displayName="AlertTitle";const Fe=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:g("text-sm [&_p]:leading-relaxed",s),...a}));Fe.displayName="AlertDescription";const aa=()=>Xe({mutationFn:async s=>(await me.delete(`/members/delete.php?id=${s}`)).data});function ta({open:s,onOpenChange:a,currentRow:t}){const{mutate:o,isSuccess:r}=aa(),l=es(),c=async()=>{o(t.id)};return i.useEffect(()=>{r&&(a(!1),_({title:"User deleted",description:e.jsxs("p",{children:["User ",e.jsx("span",{className:"font-bold",children:t.name})," has been deleted."]})}),l.invalidateQueries({queryKey:["userList"]}))},[r,t.name]),e.jsx(ds,{open:s,onOpenChange:a,handleConfirm:c,title:e.jsxs("span",{className:"text-destructive",children:[e.jsx(Rs,{className:"mr-1 inline-block stroke-destructive",size:18})," ","Delete User"]}),desc:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"mb-2",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-bold",children:t.username}),"?",e.jsx("br",{}),"This action will permanently remove the user "," ",e.jsx("span",{className:"font-bold",children:t.name.toUpperCase()})," ","from the system. This cannot be undone."]}),e.jsxs(De,{variant:"destructive",children:[e.jsx(Ae,{children:"Warning!"}),e.jsx(Fe,{children:"Please be carefull, this operation can not be rolled back."})]})]}),confirmText:"Delete",destructive:!0})}const ra=d.object({email:d.string().min(1,{message:"Email is required."}).email({message:"Email is invalid."}),role:d.string().min(1,{message:"Role is required."}),desc:d.string().optional()});function oa({open:s,onOpenChange:a}){const t=ae({resolver:te(ra),defaultValues:{email:"",role:"",desc:""}}),o=r=>{t.reset(),_({title:"You submitted the following values:",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(r,null,2)})})}),a(!1)};return e.jsx(re,{open:s,onOpenChange:r=>{t.reset(),a(r)},children:e.jsxs(oe,{className:"sm:max-w-md",children:[e.jsxs(ne,{className:"text-left",children:[e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(Is,{})," Invite User"]}),e.jsx(ie,{children:"Invite new user to join your team by sending them an email invitation. Assign a role to define their access level."})]}),e.jsx(ce,{...t,children:e.jsxs("form",{id:"user-invite-form",onSubmit:t.handleSubmit(o),className:"space-y-4",children:[e.jsx(f,{control:t.control,name:"email",render:({field:r})=>e.jsxs(j,{children:[e.jsx(v,{children:"Email"}),e.jsx(y,{children:e.jsx(S,{type:"email",placeholder:"eg: john.doe@gmail.com",...r})}),e.jsx(N,{})]})}),e.jsx(f,{control:t.control,name:"role",render:({field:r})=>e.jsxs(j,{className:"space-y-1",children:[e.jsx(v,{children:"Role"}),e.jsx(Ie,{defaultValue:r.value,onValueChange:r.onChange,placeholder:"Select a role",items:ke.map(({label:l,value:c})=>({label:l,value:c}))}),e.jsx(N,{})]})}),e.jsx(f,{control:t.control,name:"desc",render:({field:r})=>e.jsxs(j,{className:"",children:[e.jsx(v,{children:"Description (optional)"}),e.jsx(y,{children:e.jsx(ms,{className:"resize-none",placeholder:"Add a personal note to your invitation (optional)",...r})}),e.jsx(N,{})]})})]})}),e.jsxs(de,{className:"gap-y-2",children:[e.jsx(ss,{asChild:!0,children:e.jsx(w,{variant:"outline",children:"Cancel"})}),e.jsxs(w,{type:"submit",form:"user-invite-form",children:["Invite ",e.jsx(ks,{})]})]})]})})}function na(){const{open:s,setOpen:a,currentRow:t,setCurrentRow:o}=V();return e.jsxs(e.Fragment,{children:[e.jsx(K,{open:s==="add",onOpenChange:()=>a("add")},"user-add"),e.jsx(oa,{open:s==="invite",onOpenChange:()=>a("invite")},"user-invite"),t&&e.jsxs(e.Fragment,{children:[e.jsx(K,{open:s==="edit",onOpenChange:()=>{a("edit"),setTimeout(()=>{o(null)},500)},currentRow:t},`user-edit-${t.id}`),e.jsx(ta,{open:s==="delete",onOpenChange:()=>{a("delete"),setTimeout(()=>{o(null)},500)},currentRow:t},`user-delete-${t.id}`)]})]})}function la(){const{setOpen:s}=V();return e.jsx("div",{className:"flex gap-2",children:e.jsxs(w,{className:"space-x-1",onClick:()=>s("add"),children:[e.jsx("span",{children:"Add User"})," ",e.jsx(Fs,{size:18})]})})}function ia({table:s}){return e.jsxs("div",{className:"flex items-center justify-between overflow-clip px-2",style:{overflowClipMargin:1},children:[e.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(ue,{value:`${s.getState().pagination.pageSize}`,onValueChange:a=>{s.setPageSize(Number(a))},children:[e.jsx(pe,{className:"h-8 w-[70px]",children:e.jsx(he,{placeholder:s.getState().pagination.pageSize})}),e.jsx(xe,{side:"top",children:[10,20,30,40,50].map(a=>e.jsx(E,{value:`${a}`,children:a},a))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of"," ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(w,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(us,{className:"h-4 w-4"})]}),e.jsxs(w,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(ps,{className:"h-4 w-4"})]}),e.jsxs(w,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(hs,{className:"h-4 w-4"})]}),e.jsxs(w,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(xs,{className:"h-4 w-4"})]})]})]})]})}function ca({table:s}){var a;return e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:e.jsx(S,{placeholder:"Filter users...",value:((a=s.getColumn("username"))==null?void 0:a.getFilterValue())??"",onChange:t=>{var o;return(o=s.getColumn("username"))==null?void 0:o.setFilterValue(t.target.value)},className:"h-8 w-[150px] lg:w-[250px]"})})})}function da({columns:s,data:a}){var b;const[t,o]=i.useState({}),[r,l]=i.useState({}),[c,n]=i.useState([]),[u,p]=i.useState([]),x=gs({data:a,columns:s,state:{sorting:u,columnVisibility:r,rowSelection:t,columnFilters:c},enableRowSelection:!0,onRowSelectionChange:o,onSortingChange:p,onColumnFiltersChange:n,onColumnVisibilityChange:l,getCoreRowModel:Ss(),getFilteredRowModel:bs(),getPaginationRowModel:Ps(),getSortedRowModel:Cs(),getFacetedRowModel:ys(),getFacetedUniqueValues:ws()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(ca,{table:x}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(fs,{children:[e.jsx(js,{children:x.getHeaderGroups().map(h=>e.jsx(O,{className:"group/row",children:h.headers.map(m=>{var M;return e.jsx(vs,{colSpan:m.colSpan,className:((M=m.column.columnDef.meta)==null?void 0:M.className)??"",children:m.isPlaceholder?null:H(m.column.columnDef.header,m.getContext())},m.id)})},h.id))}),e.jsx(Ns,{children:(b=x.getRowModel().rows)!=null&&b.length?x.getRowModel().rows.map(h=>e.jsx(O,{"data-state":h.getIsSelected()&&"selected",className:"group/row",children:h.getVisibleCells().map(m=>{var M;return e.jsx($,{className:((M=m.column.columnDef.meta)==null?void 0:M.className)??"",children:H(m.column.columnDef.cell,m.getContext())},m.id)})},h.id)):e.jsx(O,{children:e.jsx($,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(ia,{table:x})]})}const ma=()=>{const{data:s,isLoading:a}=as({queryKey:["userList"],queryFn:async()=>(await me.get("/members/list.php")).data});return{userData:s,isLoading:a}};function ua(){const{userData:s,isLoading:a}=ma();return i.useEffect(()=>{console.log(s==null?void 0:s.data)},[s]),a?e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):e.jsxs(Qs,{children:[e.jsxs(ts,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Members List"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage members and their credentials here."})]}),e.jsx(la,{})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:s&&(s==null?void 0:s.data)&&e.jsx(da,{data:s.data,columns:Xs})})]}),e.jsx(na,{})]})}const ga=rs("/_authenticated/users/")({component:ua});export{ga as Route};
