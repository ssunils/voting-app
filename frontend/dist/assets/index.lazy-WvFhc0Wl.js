import{af as V,m as g,a1 as j,j as e,d as w,Y as A,Z as E,B as i,_ as H,$ as u,a0 as v,r as m,z as r,a2 as B,a3 as G,b as K,t as Y,ag as $,ah as J,ai as X,aj as Z,ak as Q,F as W,e as b,f as y,g as S,h as k,i as M,al as ee,am as se,aa as O,ae as te,c as ae}from"./index-BHE236ec.js";import{A as P,a as R,C as ne,E as le,u as oe,D as re,I as ce,S as ie,b as de,c as ue,d as he,e as xe,g as me,h as ge,i as pe,j as je,k as fe,l as we,m as ve,n as f,o as Ne,p as T,q as Ce,r as D,s as be,t as ye,v as Se,w as ke,x as Me,y as Pe,T as I,f as Re}from"./table-YFGbOzFN.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=V("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=V("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license @tabler/icons-react v3.24.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ie=g("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.24.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fe=g("outline","circle-x","IconCircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.24.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ve=g("outline","circle","IconCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.24.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ae=g("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.24.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ee=g("outline","stopwatch","IconStopwatch",[["path",{d:"M5 13a7 7 0 1 0 14 0a7 7 0 0 0 -14 0z",key:"svg-0"}],["path",{d:"M14.5 10.5l-2.5 2.5",key:"svg-1"}],["path",{d:"M17 8l1 -1",key:"svg-2"}],["path",{d:"M14 3h-4",key:"svg-3"}]]);const z=({className:s,fixed:t,children:a,...n})=>{const[l,h]=j.useState(0);return j.useEffect(()=>{const o=()=>{h(document.body.scrollTop||document.documentElement.scrollTop)};return document.addEventListener("scroll",o,{passive:!0}),()=>document.removeEventListener("scroll",o)},[]),e.jsx("header",{className:w("flex h-16 items-center gap-3 bg-background p-4 sm:gap-4",t&&"header-fixed peer/header fixed z-50 w-[inherit] rounded-md",l>10&&t?"shadow":"shadow-none",s),...n,children:a})};z.displayName="Header";const He=[{value:"pending",label:"Pending",icon:Ve},{value:"in progress",label:"In Progress",icon:Ee},{value:"done",label:"Done",icon:Ie},{value:"canceled",label:"Canceled",icon:Fe}];function x({column:s,title:t,className:a}){return s.getCanSort()?e.jsx("div",{className:w("flex items-center space-x-2",a),children:e.jsxs(A,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(i,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:t}),s.getIsSorted()==="desc"?e.jsx(P,{className:"ml-2 h-4 w-4"}):s.getIsSorted()==="asc"?e.jsx(R,{className:"ml-2 h-4 w-4"}):e.jsx(ne,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(H,{align:"start",children:[e.jsxs(u,{onClick:()=>s.toggleSorting(!1),children:[e.jsx(R,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(u,{onClick:()=>s.toggleSorting(!0),children:[e.jsx(P,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),s.getCanHide()&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs(u,{onClick:()=>s.toggleVisibility(!1),children:[e.jsx(le,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})]})}):e.jsx("div",{className:w(a),children:t})}const _=j.createContext(null);function Oe({children:s}){const[t,a]=oe(null),[n,l]=m.useState(null);return e.jsx(_,{value:{open:t,setOpen:a,currentRow:n,setCurrentRow:l},children:s})}const N=()=>{const s=j.useContext(_);if(!s)throw new Error("useTasks has to be used within <TasksContext>");return s},ze=r.object({subject:r.string(),status:r.string(),label:r.string(),vote_ratio:r.string(),result:r.string()});function _e({row:s}){const t=ze.parse(s.original),{setOpen:a,setCurrentRow:n}=N();return e.jsxs(A,{modal:!1,children:[e.jsx(E,{asChild:!0,children:e.jsxs(i,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(H,{align:"end",className:"w-[160px]",children:[e.jsxs(u,{className:"cursor-pointer",onClick:()=>{n(t),a("update")},children:[e.jsx(Te,{className:"text-green-500"}),"Start Poll"]}),e.jsx(v,{}),e.jsxs(u,{className:"cursor-pointer",onClick:()=>{n(t),a("update")},children:[e.jsx(De,{className:" text-blue-500"}),"Edit"]}),e.jsx(v,{}),e.jsxs(u,{className:"cursor-pointer",onClick:()=>{n(t),a("delete")},children:["Delete",e.jsx(B,{children:e.jsx(ce,{size:16,className:"text-red-600"})})]})]})]})}const Le=[{accessorKey:"id",header:({column:s})=>e.jsx(x,{column:s,title:"ID"}),cell:({row:s})=>e.jsx("div",{className:"w-[20px]",children:s.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"subject",header:({column:s})=>e.jsx(x,{column:s,title:"Subject"}),cell:({row:s})=>e.jsx("div",{className:"flex space-x-2",children:e.jsx("span",{className:"truncate font-medium",children:s.getValue("subject")})})},{accessorKey:"status",header:({column:s})=>e.jsx(x,{column:s,title:"Status"}),cell:({row:s})=>{const t=He.find(a=>a.value===s.getValue("status"));return t?e.jsx("div",{className:"flex w-[100px] items-center",children:e.jsx("span",{children:t.label})}):null}},{accessorKey:"vote_ratio",header:({column:s})=>e.jsx(x,{column:s,title:"Vote Ratio (%)"}),cell:({row:s})=>e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:s.getValue("vote_ratio")})})},{accessorKey:"result",header:({column:s})=>e.jsx(x,{column:s,title:"Result"}),cell:({row:s})=>e.jsx("div",{className:"flex items-center",children:e.jsx(G,{variant:`${s.getValue("result")==="Accepted"?"default":"outline"}`,children:s.getValue("result")})})},{id:"actions",cell:({row:s})=>e.jsx(_e,{row:s})}];function qe({table:s}){return e.jsxs("div",{className:"flex items-center justify-between overflow-clip px-2",style:{overflowClipMargin:1},children:[e.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(ie,{value:`${s.getState().pagination.pageSize}`,onValueChange:t=>{s.setPageSize(Number(t))},children:[e.jsx(de,{className:"h-8 w-[70px]",children:e.jsx(ue,{placeholder:s.getState().pagination.pageSize})}),e.jsx(he,{side:"top",children:[10,20,30,40,50].map(t=>e.jsx(xe,{value:`${t}`,children:t},t))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of"," ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(i,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(me,{className:"h-4 w-4"})]}),e.jsxs(i,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(ge,{className:"h-4 w-4"})]}),e.jsxs(i,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(pe,{className:"h-4 w-4"})]}),e.jsxs(i,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(je,{className:"h-4 w-4"})]})]})]})]})}function Ue({columns:s,data:t}){var C;const[a,n]=m.useState({}),[l,h]=m.useState({}),[o,L]=m.useState([]),[q,U]=m.useState([]),p=fe({data:t,columns:s,state:{sorting:q,columnVisibility:l,rowSelection:a,columnFilters:o},enableRowSelection:!0,onRowSelectionChange:n,onSortingChange:U,onColumnFiltersChange:L,onColumnVisibilityChange:h,getCoreRowModel:Pe(),getFilteredRowModel:Me(),getPaginationRowModel:ke(),getSortedRowModel:Se(),getFacetedRowModel:ye(),getFacetedUniqueValues:be()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(we,{children:[e.jsx(ve,{children:p.getHeaderGroups().map(d=>e.jsx(f,{children:d.headers.map(c=>e.jsx(Ne,{colSpan:c.colSpan,children:c.isPlaceholder?null:T(c.column.columnDef.header,c.getContext())},c.id))},d.id))}),e.jsx(Ce,{children:(C=p.getRowModel().rows)!=null&&C.length?p.getRowModel().rows.map(d=>e.jsx(f,{"data-state":d.getIsSelected()&&"selected",children:d.getVisibleCells().map(c=>e.jsx(D,{children:T(c.column.columnDef.cell,c.getContext())},c.id))},d.id)):e.jsx(f,{children:e.jsx(D,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(qe,{table:p})]})}const Be=r.object({title:r.string().min(1,"Title is required."),status:r.string().min(1,"Please select a status."),label:r.string().min(1,"Please select a label."),priority:r.string().min(1,"Please choose a priority.")});function F({open:s,onOpenChange:t,currentRow:a}){const n=!!a,l=K({resolver:Y(Be),defaultValues:a??{title:"",status:"",label:"",priority:""}}),h=o=>{t(!1),l.reset(),O({title:"You submitted the following values:",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(o,null,2)})})})};return e.jsx($,{open:s,onOpenChange:o=>{t(o),l.reset()},children:e.jsxs(J,{className:"flex flex-col",children:[e.jsxs(X,{className:"text-left",children:[e.jsxs(Z,{children:[n?"Update":"Create"," Poll"]}),e.jsxs(Q,{children:[n?"Update the poll by providing necessary info.":"Add a new poll by providing necessary info.","Click save when you're done."]})]}),e.jsx(W,{...l,children:e.jsxs("form",{id:"tasks-form",onSubmit:l.handleSubmit(h),className:"flex-1 space-y-5",children:[e.jsx(b,{control:l.control,name:"title",render:({field:o})=>e.jsxs(y,{className:"space-y-1",children:[e.jsx(S,{children:"Subject (English)"}),e.jsx(k,{children:e.jsx(I,{...o,placeholder:"Enter subject in English",rows:10})}),e.jsx(M,{})]})}),e.jsx(b,{control:l.control,name:"title",render:({field:o})=>e.jsxs(y,{className:"space-y-1",children:[e.jsx(S,{children:"Subject (Tamil)"}),e.jsx(k,{children:e.jsx(I,{...o,placeholder:"தமிழில் தலைப்பை உள்ளிடவும்",rows:10})}),e.jsx(M,{})]})})]})}),e.jsxs(ee,{className:"gap-2",children:[e.jsx(se,{asChild:!0,children:e.jsx(i,{variant:"outline",children:"Close"})}),e.jsx(i,{form:"tasks-form",type:"submit",children:"Save changes"})]})]})})}function Ge(){const{open:s,setOpen:t,currentRow:a,setCurrentRow:n}=N();return e.jsxs(e.Fragment,{children:[e.jsx(F,{open:s==="create",onOpenChange:()=>t("create")},"task-create"),a&&e.jsxs(e.Fragment,{children:[e.jsx(F,{open:s==="update",onOpenChange:()=>{t("update"),setTimeout(()=>{n(null)},500)},currentRow:a},"task-update"),e.jsx(Re,{destructive:!0,open:s==="delete",onOpenChange:()=>{t("delete"),setTimeout(()=>{n(null)},500)},handleConfirm:()=>{t(null),setTimeout(()=>{n(null)},500),O({title:"The following task has been deleted:",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(a,null,2)})})})},className:"max-w-md",title:"Delete this task:  ?",desc:e.jsxs(e.Fragment,{children:["You are about to delete a task with the ID"," ",e.jsx("strong",{children:"c.."}),". ",e.jsx("br",{}),"This action cannot be undone."]}),confirmText:"Delete"},"task-delete")]})]})}function Ke(){const{setOpen:s}=N();return e.jsx("div",{className:"flex gap-2",children:e.jsxs(i,{className:"space-x-1",onClick:()=>s("create"),children:[e.jsx("span",{children:"Create"})," ",e.jsx(Ae,{size:18})]})})}const Ye=[{subject:"Do you approve the minutes of the previous AGM?",status:"in progress",label:"documentation",vote_ratio:"Yes: 50% / No: 50%",result:"-"},{subject:"Do you accept the church's annual financial report for the year?",status:"done",label:"documentation",vote_ratio:"Yes: 60% / No: 40%",result:"Accepted"},{subject:"Do you accept the church’s primary focus for the upcoming year?",status:"pending",label:"documentation",vote_ratio:"N/A",result:"-"},{subject:"Do you accept the annual financial report for the year?",status:"pending",label:"documentation",vote_ratio:"N/A",result:"-"},{subject:"Do you accept the church's annual financial report for the year?",status:"pending",label:"documentation",vote_ratio:"N/A",result:"-"}];function $e(){return e.jsxs(Oe,{children:[e.jsx(z,{fixed:!0}),e.jsxs(te,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-x-4 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Polls"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage your polls here."})]}),e.jsx(Ke,{})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:e.jsx(Ue,{data:Ye,columns:Le})})]}),e.jsx(Ge,{})]})}const Ze=ae("/_authenticated/polls/")({component:$e});export{Ze as Route};
